<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Login</title>
    <link rel='stylesheet' type='text/css' media='screen' href='form-page.css'>

</head>

<body>
    <div class="form-container" id="cadastro">
        <img src="assets/logovermelho.png" alt="logotipo" width=300 height=200>
        <h1>Login</h1>

        <form method="post" action="">
            <div>
                <input id="email" name="email" required="required" type="email" placeholder="Digite seu e-mail">
            </div>

            <div>
                <input id="senha" name="senha" required="required" type="password" placeholder="Digite sua senha">
            </div>
            <div class="actions">
                <span>
                    Esqueceu senha?
                    <a href="#paralogin"> Recuperar senha </a>
                </span>
                <button>Logar</button>
            </div>
        </form>
    </div>
    <script>
        const form = document.querySelector("form")

        form.addEventListener("submit", async ev => {
            ev.preventDefault()

            const data = {
                email: form.email.value,
                senha: form.senha.value
            };

            const configReq = {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            };

            const reqLog = await fetch("/login", configReq);

            if (reqLog.status == 200)  {
                // alert("YEYYYYY LEGAlLLLLLlajsdksajhfkjdsahg")
                location.href = "http://localhost/menu.html"
                return
            }

            alert("o servidor disse que não achou seu usuário e senha")
        })
    </script>
</body>

</html>